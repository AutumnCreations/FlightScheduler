import{s as nt,n as z,r as ct,c as it,o as ot,t as rt}from"../chunks/scheduler.DmhBjxsz.js";import{S as dt,i as ut,e as y,s as B,t as j,c as g,a as E,k as Y,f as F,b as J,d as v,l as f,g as O,h as o,m as Z,j as W,n as x,o as $}from"../chunks/index.nQENUGP7.js";import{w as ht}from"../chunks/index.DhywW22w.js";function R(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function tt(l,t,e){const s=l.slice();return s[16]=t[e],s}function et(l,t,e){const s=l.slice();return s[19]=t[e],s}function st(l){let t,e=l[19]+"",s,r,c,n=l[19].slice(0,2)+"",h,m;return{c(){t=y("div"),s=j(e),r=B(),c=y("div"),h=j(n),m=B(),this.h()},l(u){t=g(u,"DIV",{class:!0});var i=E(t);s=J(i,e),i.forEach(v),r=F(u),c=g(u,"DIV",{class:!0});var b=E(c);h=J(b,n),m=F(b),b.forEach(v),this.h()},h(){f(t,"class","hidden md:block"),f(c,"class","block md:hidden")},m(u,i){O(u,t,i),o(t,s),O(u,r,i),O(u,c,i),o(c,h),o(c,m)},p:z,d(u){u&&(v(t),v(r),v(c))}}}function ft(l){let t;return{c(){t=y("div"),this.h()},l(e){t=g(e,"DIV",{class:!0}),E(t).forEach(v),this.h()},h(){f(t,"class","day emptyDate")},m(e,s){O(e,t,s)},p:z,d(e){e&&v(t)}}}function pt(l){let t,e,s=G(l[16].date)+"",r,c,n,h='<div class="hidden lg:block">No Flights</div> <div class="block lg:hidden">-</div>',m;return{c(){t=y("div"),e=y("p"),r=j(s),c=B(),n=y("div"),n.innerHTML=h,m=B(),this.h()},l(u){t=g(u,"DIV",{class:!0});var i=E(t);e=g(i,"P",{class:!0});var b=E(e);r=J(b,s),b.forEach(v),c=F(i),n=g(i,"DIV",{class:!0,"data-svelte-h":!0}),Y(n)!=="svelte-wb9fc8"&&(n.innerHTML=h),m=F(i),i.forEach(v),this.h()},h(){f(e,"class","dateBadge"),f(n,"class","flightEntry"),f(t,"class","card day noFlight")},m(u,i){O(u,t,i),o(t,e),o(e,r),o(t,c),o(t,n),o(t,m)},p(u,i){i&8&&s!==(s=G(u[16].date)+"")&&W(r,s)},d(u){u&&v(t)}}}function vt(l){let t,e,s=G(l[16].date)+"",r,c,n,h,m,u,i,b=at(l[16].price)+"",I,M,L;return{c(){t=y("a"),e=y("p"),r=j(s),c=B(),n=y("div"),h=y("i"),u=B(),i=y("p"),I=j(b),M=B(),this.h()},l(p){t=g(p,"A",{href:!0,class:!0});var D=E(t);e=g(D,"P",{class:!0});var C=E(e);r=J(C,s),C.forEach(v),c=F(D),n=g(D,"DIV",{class:!0});var w=E(n);h=g(w,"I",{class:!0}),E(h).forEach(v),u=F(w),i=g(w,"P",{class:!0});var T=E(i);I=J(T,b),T.forEach(v),w.forEach(v),M=F(D),D.forEach(v),this.h()},h(){f(e,"class","dateBadge"),f(h,"class",m="fa-solid fa-tag scale-0 md:scale-100 "+(Math.round(l[16].price)===Math.round(l[1])?"":"opacity-0")),f(i,"class","price"),f(n,"class","flightEntry"),f(t,"href","#top"),f(t,"class",L="card card-hover day valid "+(Math.round(l[16].price)===Math.round(l[1])?"cheapest":""))},m(p,D){O(p,t,D),o(t,e),o(e,r),o(t,c),o(t,n),o(n,h),o(n,u),o(n,i),o(i,I),o(t,M)},p(p,D){D&8&&s!==(s=G(p[16].date)+"")&&W(r,s),D&10&&m!==(m="fa-solid fa-tag scale-0 md:scale-100 "+(Math.round(p[16].price)===Math.round(p[1])?"":"opacity-0"))&&f(h,"class",m),D&8&&b!==(b=at(p[16].price)+"")&&W(I,b),D&10&&L!==(L="card card-hover day valid "+(Math.round(p[16].price)===Math.round(p[1])?"cheapest":""))&&f(t,"class",L)},d(p){p&&v(t)}}}function lt(l){let t;function e(c,n){return c[16].date&&c[16].price!==void 0?vt:c[16].date?pt:ft}let s=e(l),r=s(l);return{c(){r.c(),t=$()},l(c){r.l(c),t=$()},m(c,n){r.m(c,n),O(c,t,n)},p(c,n){s===(s=e(c))&&r?r.p(c,n):(r.d(1),r=s(c),r&&(r.c(),r.m(t.parentNode,t)))},d(c){c&&v(t),r.d(c)}}}function _t(l){let t,e,s,r='<button type="button" class="jumpButton"><div class="hidden md:block">Jump to Today</div> <div class="block md:hidden">Today</div></button> <div class="dateButtons"><button type="button" class="customButton">Month</button> <button type="button" class="customButton">Week</button> <button type="button" class="customButton">Day</button></div>',c,n,h,m='<i class="fa-solid fa-caret-left"></i>',u,i,b,I,M,L,p,D='<i class="fa-solid fa-caret-right"></i>',C,w,T,N,S,H,P=R(l[4]),_=[];for(let d=0;d<P.length;d+=1)_[d]=st(et(l,P,d));let U=R(l[3]),k=[];for(let d=0;d<U.length;d+=1)k[d]=lt(tt(l,U,d));return{c(){t=y("div"),e=y("div"),s=y("div"),s.innerHTML=r,c=B(),n=y("div"),h=y("button"),h.innerHTML=m,u=B(),i=y("h2"),b=j(l[2]),I=j(", "),M=j(l[0]),L=B(),p=y("button"),p.innerHTML=D,C=B(),w=y("div");for(let d=0;d<_.length;d+=1)_[d].c();T=B(),N=y("div");for(let d=0;d<k.length;d+=1)k[d].c();this.h()},l(d){t=g(d,"DIV",{class:!0});var A=E(t);e=g(A,"DIV",{class:!0});var a=E(e);s=g(a,"DIV",{class:!0,"data-svelte-h":!0}),Y(s)!=="svelte-c05bc3"&&(s.innerHTML=r),c=F(a),n=g(a,"DIV",{class:!0});var V=E(n);h=g(V,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Y(h)!=="svelte-v7se1n"&&(h.innerHTML=m),u=F(V),i=g(V,"H2",{class:!0});var X=E(i);b=J(X,l[2]),I=J(X,", "),M=J(X,l[0]),X.forEach(v),L=F(V),p=g(V,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Y(p)!=="svelte-oqtbhl"&&(p.innerHTML=D),V.forEach(v),C=F(a),w=g(a,"DIV",{class:!0});var K=E(w);for(let q=0;q<_.length;q+=1)_[q].l(K);K.forEach(v),T=F(a),N=g(a,"DIV",{class:!0});var Q=E(N);for(let q=0;q<k.length;q+=1)k[q].l(Q);Q.forEach(v),a.forEach(v),A.forEach(v),this.h()},h(){f(s,"class","dateRange"),f(h,"type","button"),f(h,"class","iconBtn"),f(i,"class","h2 w-2/3 md:w-2/5"),f(p,"type","button"),f(p,"class","iconBtn"),f(n,"class","flex items-center justify-center"),f(w,"class","weekdays"),f(N,"class","calendar"),f(e,"class","flightScheduler"),f(t,"class","container")},m(d,A){O(d,t,A),o(t,e),o(e,s),o(e,c),o(e,n),o(n,h),o(n,u),o(n,i),o(i,b),o(i,I),o(i,M),o(n,L),o(n,p),o(e,C),o(e,w);for(let a=0;a<_.length;a+=1)_[a]&&_[a].m(w,null);o(e,T),o(e,N);for(let a=0;a<k.length;a+=1)k[a]&&k[a].m(N,null);S||(H=[Z(h,"click",l[8]),Z(p,"click",l[9])],S=!0)},p(d,[A]){if(A&4&&W(b,d[2]),A&1&&W(M,d[0]),A&16){P=R(d[4]);let a;for(a=0;a<P.length;a+=1){const V=et(d,P,a);_[a]?_[a].p(V,A):(_[a]=st(V),_[a].c(),_[a].m(w,null))}for(;a<_.length;a+=1)_[a].d(1);_.length=P.length}if(A&10){U=R(d[3]);let a;for(a=0;a<U.length;a+=1){const V=tt(d,U,a);k[a]?k[a].p(V,A):(k[a]=lt(V),k[a].c(),k[a].m(N,null))}for(;a<k.length;a+=1)k[a].d(1);k.length=U.length}},i:z,o:z,d(d){d&&v(t),x(_,d),x(k,d),S=!1,ct(H)}}}function G(l){return l?`${l.getDate()}`:""}function at(l){return l!==void 0?`$${Math.round(l)}`:""}function mt(l,t,e){let s,r,c,n,h,m=[];const u=["January","February","March","April","May","June","July","August","September","October","November","December"],i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b=new Date,I=ht([]);it(l,I,T=>e(3,h=T));let M=b.getFullYear();const L=async()=>{const T=await fetch(`/api/FlightPrices/monthly?year=${M}&month=${s}`);T.ok?(m=await T.json(),p()):console.error("Failed to fetch flight prices")};ot(async()=>{await L()});const p=()=>{const N=new Date(M,s,1).getDay(),S=[];for(let H=0;H<N;H++)S.push({date:null});for(let H=1;H<=c;H++){const P=new Date(M,s,H);let _=null;m.length>0&&new Date(m[0].date).getDate()===H&&(_=m.shift()),_?(S.push({date:P,price:_.price}),e(1,n=Math.min(n,_.price)),_=null):S.push({date:P})}I.set(S)},D=async function(T){e(7,s+=T),s>11?(e(0,M++,M),e(7,s=0)):s<0&&(e(0,M--,M),e(7,s=11)),e(1,n=Number.MAX_VALUE),await rt(),await L()},C=()=>D(-1),w=()=>D(1);return l.$$.update=()=>{l.$$.dirty&128&&e(2,r=u[s]),l.$$.dirty&129&&(c=new Date(M,s+1,0).getDate())},e(7,s=b.getMonth()),e(1,n=Number.MAX_VALUE),[M,n,r,h,i,I,D,s,C,w]}class Dt extends dt{constructor(t){super(),ut(this,t,mt,_t,nt,{})}}export{Dt as component};
